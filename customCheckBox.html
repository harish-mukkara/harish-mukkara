<!DOCTYPE html>

<head>
    <script crossorigin=anonymous integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo="
        src=https://code.jquery.com/jquery-3.4.1.min.js> </script> <style>
    * {
        font-family: botplatform-font, "Helvetica Neue", Helvetica, Arial, sans-serif;
        font-weight: 400
    }
    
    .container {
        display: block;
        position: relative;
        padding-left: 25px;
        margin-bottom: 12px;
        cursor: pointer;
        font-size: 14px;
        color: #263238;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        user-select: none
    }
    
    .container input {
        position: absolute;
        opacity: 0;
        cursor: pointer;
        height: 0;
        width: 0
    }
    
    .checkmark {
        position: absolute;
        top: 0;
        left: 0;
        height: 15px;
        width: 15px;
        background-color: #eee;
        border: 1px solid #1c4191
    }
    
    .container:hover input~.checkmark {
        background-color: #ccc
    }
    
    .container input:checked~.checkmark {
        background-color: #1c4191
    }
    
    .checkmark:after {
        content: "";
        position: absolute;
        display: none
    }
    
    .container input:checked~.checkmark:after {
        display: block
    }
    
    .container .checkmark:after {
        left: 4px;
        top: 2px;
        width: 3px;
        height: 6px;
        border: solid #fff;
        border-width: 0 3px 3px 0;
        -webkit-transform: rotate(45deg);
        -ms-transform: rotate(45deg);
        transform: rotate(45deg)
    }
    
    #submit {
        position: absolute;
        bottom: 0;
        /* width: 80%; */
        background-color: transparent;
        padding:5px 15px;
        /* margin: 10px 5px; */
        border-radius: .3em;
        border-color: #1c4191;
        background-color: #1c4191;
        color:white;
        position: relative;
        overflow: hidden
    }
    </style>
</head>
<div id=options></div>
<button id=submit>submit</button>
<script>
    $(document).ready(function () {
        let e = [...new URLSearchParams(window.location.search).entries()];
        e = e.filter(e => "frameId" != e[0]);
        let n = $("#options");
        e.forEach(e => {
            n.append($(`<label class="container">${e[0]}<input type="checkbox" value="${e[1]}"><span class="checkmark"></span></label>`))
        }), $("#submit").click(function (e) {
            let a = [];
            console.log("button clicked"), n.children("label").each(function (e) {
                let n = $(this).children("input").eq(0);
                1 == n.prop("checked") && a.push(n.val())
            }), console.log(`Payload is ${JSON.stringify(a)}`), window.parent.postMessage(JSON.stringify({
                event_code: "ym-client-event",
                data: JSON.stringify({
                    event: {
                        code: "issues",
                        data: {
                            payload: a
                        }
                    }
                })
            }), "*")
        })
    });
</script>

    </html>